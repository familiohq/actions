name: Pull request

on:
  pull_request:
    types: [opened, synchronize, edited, reopened]

jobs:
  job1:
    name: Verify that pull request title starts with a gitmoji
    runs-on: ubuntu-latest
    steps:
      - name: Load gitmojies
        id: gitmojies
        uses: juliangruber/read-file-action@v1
        with:
          path: ./.github/stubs/gitmojies.json
      - name: Echo gitmojies.json
        run: echo "${{ steps.gitmojies.outputs.content }}"
      # - uses: deepakputhraya/action-pr-title@master
      #   with:
      #     allowed_prefixes: "${{ steps.gitmojies.outputs.content }}" # title should start with the given prefix
      #     min_length: 5
      #     max_length: 72

  setup:
    name: Setup
    runs-on: ubuntu-latest
    steps:
      - uses: paralenz/actions/setup-node@latest

  lint:
    name: Linting
    needs: [setup]
    runs-on: ubuntu-latest
    steps:
      - uses: paralenz/actions/setup-node@latest
      - name: Run Linting
        run: yarn lint
